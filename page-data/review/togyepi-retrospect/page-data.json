{"componentChunkName":"component---src-templates-blog-post-js","path":"/review/togyepi-retrospect/","result":{"data":{"site":{"siteMetadata":{"title":"Caesiumy's BLOG","author":"Caesiumy","siteUrl":"https://caesiumy.github.io","comment":{"disqusShortName":"Caesiumy","utterances":""},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"e7f78800-cbb8-5a8a-af35-63ce9171ec3c","excerpt":"결과부터 보여주기 결과 사진이랑 다 깃허브에 올려두었습니다. 버전2 깃허브 링크 버전2 배포 링크 토계피가 뭔가요? 학부생 시절 4학년 2학기때(201…","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; margin: 36px auto;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABZ0lEQVQY02P4jwT+/fuHxIYx/uMEDED89e/P449v3rz94POnr8evXr356TlE87Fnf2+8g2r/9OH9rauXgIy3Tx99/vwVrvnf739/kg/OcC4qKK3s023JWvv8NFD9see/w7d+6zv359b7n0B1h/ZuWtpXcfbihQUHD547ufr//99/gZonXN02/frusgvLLJZUGLXlhh6YsPrByTUPTjSfP9x67kzd2f2zb5xc9/jMtENrqjdMCJ5Tm7N3afvJBVOub5twbTtD75WtPZe3TLm+M/HoTLOtNb1Xt659cGrV/eMLb++fcPlM47l9qx4cW3Xv+IRj69OW9yav6qo6s6bh7Ia+K1uBGhn+/f/39x/QCf+vfXjSf3UbkPHz7+9ff4Eif448+3PxNYjx4/ePGQsWR6fkrVyz8vzV67cunfkHCpN/DIjghZmCJPL/DzSs/929e+/EqXOPHj78+PD+hycPEKGNrP8/KQAAM3ecAbQfIZAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"thumbnail\"\n        title=\"thumbnail\"\n        src=\"/static/325fc17d35dc1d69c02126ca89413b00/c1b63/thumbnail.png\"\n        srcset=\"/static/325fc17d35dc1d69c02126ca89413b00/5a46d/thumbnail.png 300w,\n/static/325fc17d35dc1d69c02126ca89413b00/0a47e/thumbnail.png 600w,\n/static/325fc17d35dc1d69c02126ca89413b00/c1b63/thumbnail.png 1200w,\n/static/325fc17d35dc1d69c02126ca89413b00/d61c2/thumbnail.png 1800w,\n/static/325fc17d35dc1d69c02126ca89413b00/97a96/thumbnail.png 2400w,\n/static/325fc17d35dc1d69c02126ca89413b00/65781/thumbnail.png 2778w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h1 id=\"결과부터-보여주기\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EA%B3%BC%EB%B6%80%ED%84%B0-%EB%B3%B4%EC%97%AC%EC%A3%BC%EA%B8%B0\" aria-label=\"결과부터 보여주기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결과부터 보여주기</h1>\n<p>결과 사진이랑 다 깃허브에 올려두었습니다.</p>\n<p><a href=\"https://github.com/CaesiumY/Togyepi\">버전2 깃허브 링크</a></p>\n<p><a href=\"https://caesiumy.github.io/Togyepi/\">버전2 배포 링크</a></p>\n<h1 id=\"토계피가-뭔가요\" style=\"position:relative;\"><a href=\"#%ED%86%A0%EA%B3%84%ED%94%BC%EA%B0%80-%EB%AD%94%EA%B0%80%EC%9A%94\" aria-label=\"토계피가 뭔가요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>토계피가 뭔가요?</h1>\n<p>학부생 시절 4학년 2학기때(2018년) 했던 프로젝트이자, <strong>처음</strong>으로 자바스크립트를 쓴 프로젝트였고, <strong>첫</strong> 프론트엔드 프로젝트였고, <strong>첫</strong> 협업이었고, <strong>첫</strong> 외주작품으로 했던 프로젝트입니다.</p>\n<p>당시 생명과학과 사람과 만나 요구사항에 대해서 얘기도 해보고, 중간 점검도 해보았던 프로젝트라 기억에 크게 남습니다.</p>\n<p>기능은 <strong>토질 수치를 계산</strong>해주는 보통 계산기입니다. 거기에 이제 특이한 추가 요구사항을 곁들인…!</p>\n<p>그 당시 요구 사항이</p>\n<ol>\n<li>논문과 책을 드릴테니 여기 나와있는 필요한 공식들을 간단히 계산할 수 있는 계산기를 만들어주세요.</li>\n<li>\n<p>현장에 나가서 찍은 사진마다 위치와 제목 등을 사진 위에 메모 하고 싶습니다.</p>\n<ol>\n<li>위치는 위도와 경도로 해주셨으면 합니다.</li>\n</ol>\n</li>\n<li>달력을 기반으로 해서 해야할 일을 작성할 수 있도록 하고 싶습니다.</li>\n<li>컴퓨터와 휴대폰 전부에서 사용할 수 있으면 좋겠어요.</li>\n</ol>\n<p>대강 이랬던 걸로 기억합니다.</p>\n<blockquote>\n<p>달력은 없어도 되지 않나요? 를 항상 여쭤봤던 거 같다… ‘기본 달력이 더 좋아요…’ 하면서</p>\n</blockquote>\n<h2 id=\"당시-버전-1-보러가기\" style=\"position:relative;\"><a href=\"#%EB%8B%B9%EC%8B%9C-%EB%B2%84%EC%A0%84-1-%EB%B3%B4%EB%9F%AC%EA%B0%80%EA%B8%B0\" aria-label=\"당시 버전 1 보러가기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>당시 버전 1 보러가기</h2>\n<p><a href=\"https://github.com/CaesiumY/Togyepi/tree/v1\">버전1 깃허브 브랜치</a></p>\n<p><a href=\"https://togyepi-csy9617.firebaseapp.com/#/\">버전1 배포 링크</a></p>\n<h1 id=\"리뉴얼은-왜-하시죠\" style=\"position:relative;\"><a href=\"#%EB%A6%AC%EB%89%B4%EC%96%BC%EC%9D%80-%EC%99%9C-%ED%95%98%EC%8B%9C%EC%A3%A0\" aria-label=\"리뉴얼은 왜 하시죠 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>리뉴얼은 왜 하시죠?</h1>\n<p>아무래도 처음으로 했던 프론트엔드다보니 내부 코드가 (나쁜쪽으로) 기가 막힙니다.\n그래서인지 항상 마음 속으로 불편했는데… 어차피 <code class=\"language-text\">리액트</code>를 주로 사용하니 이참에 토계피를 리뉴얼하고 <code class=\"language-text\">Vue</code>는 작별 인사를 하기 위해 리뉴얼을 진행했습니다.</p>\n<blockquote>\n<p>옛날 프로젝트를 다시 처음부터 만들어보는 것도 도움된다는 걸 어디서 본 탓도 있습니다.</p>\n</blockquote>\n<h1 id=\"리뉴얼하기\" style=\"position:relative;\"><a href=\"#%EB%A6%AC%EB%89%B4%EC%96%BC%ED%95%98%EA%B8%B0\" aria-label=\"리뉴얼하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>리뉴얼하기</h1>\n<h2 id=\"0-사전-준비\" style=\"position:relative;\"><a href=\"#0-%EC%82%AC%EC%A0%84-%EC%A4%80%EB%B9%84\" aria-label=\"0 사전 준비 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>0. 사전 준비</h2>\n<p>최근 릴리즈된 <code class=\"language-text\">Vue3</code>를 사용해보려고 했으나, 토계피의 핵심 요소중 하나인 <code class=\"language-text\">Vuetify</code>가 <code class=\"language-text\">Vue3</code>를 지원하지 않아서 기존버전으로 사용하게 되었습니다.</p>\n<p>그리고 <strong>전역 저장소가 필요하지 않아서</strong> <code class=\"language-text\">Vuex</code>도 빼고, 기타 라이브러리 없이 최대한 가볍게 만들고자 노력했습니다.</p>\n<p><code class=\"language-text\">PWA</code>의 경우에는, 버전1 당시엔 직접 뚝딱뚝딱해서 넣었는데, <strong>요즘엔 처음부터 템플릿을 제공</strong>하는 덕분에 쉽게 도입할 수 있었습니다.</p>\n<blockquote>\n<p>나머지 디자인이나 로고 등은 그대로!</p>\n</blockquote>\n<h2 id=\"1-헤더\" style=\"position:relative;\"><a href=\"#1-%ED%97%A4%EB%8D%94\" aria-label=\"1 헤더 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 헤더</h2>\n<p>먼저 개발할 대상은 역시 <code class=\"language-text\">헤더</code> 및 <code class=\"language-text\">메뉴</code>입니다. <code class=\"language-text\">앱 셸</code> 디자인이라 큰 무리는 없었고, <code class=\"language-text\">Vuetify</code>에서도 기본으로 제공하는 컴포넌트이기에 쉽게 만들어낼 수 있었습니다.</p>\n<p>달라진 점이라면 기존 버전에는 <code class=\"language-text\">툴팁</code>이 있었지만, 이번엔 <code class=\"language-text\">툴팁</code>을 삭제하였습니다. 굳이 툴팁이 없어도 추가한 <code class=\"language-text\">아이콘</code>을 통해 충분히 이해할 수 있을 것이라고 생각하였습니다.</p>\n<h3 id=\"1-1-정보-모달\" style=\"position:relative;\"><a href=\"#1-1-%EC%A0%95%EB%B3%B4-%EB%AA%A8%EB%8B%AC\" aria-label=\"1 1 정보 모달 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1-1 정보 모달</h3>\n<p><code class=\"language-text\">헤더</code> 의 우측 상단에 붙은 아이콘 버튼을 클릭하면 정보 모달이 나옵니다. 이걸 통해서 각 <code class=\"language-text\">토질 수치 계산</code>에 어떤 것들이 필요한지 재료들을 볼 수 있습니다.</p>\n<p><strong>이전 버전에서는 하드 코딩</strong>으로 글을 적었다면, 이번 리뉴얼 버전에서는 <strong>미리 정리해놓은 공식을 잘 정리</strong>하여 보여주었습니다. 프론트엔드 프레임워크의 힘을 보여주는 구간입니다.</p>\n<p>좀 더 분리하여 개별 컴포넌트로도 써먹을 수 있지만, <strong>이미 <code class=\"language-text\">Vuetify</code>에서 제공하는 <code class=\"language-text\">모달</code> 컴포넌트와 다를 바가 없어져서</strong> 유니크한 컴포넌트로 놔두었습니다.</p>\n<blockquote>\n<p>for문과 if문을 적절히 사용하여 중복을 없애고, 지속 가능성을 높였습니다.</p>\n</blockquote>\n<h2 id=\"2-달력\" style=\"position:relative;\"><a href=\"#2-%EB%8B%AC%EB%A0%A5\" aria-label=\"2 달력 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 달력</h2>\n<p>사실 처음 개발때도 굳이 필요한 기능인가… 고민했던 기능이라 리뉴얼에선 뺄까 고민을 많이 했습니다.</p>\n<p>그런데 이제 <strong><code class=\"language-text\">Vuetify</code>에서 기본으로 달력 UI컴포넌트를 제공</strong>하는 것을 알게 되고, 빼지 않고 구현하기로 마음 먹었습니다.</p>\n<p>달력을 붙이고, 모달을 통해 <strong>CREATE</strong>, 팝업을 통해 <strong>READ</strong> 와 <strong>DELETE</strong>를 구현하였습니다. <code class=\"language-text\">Vuetify</code> 달력만의 구성이 헷갈려서 다시 한 번 <code class=\"language-text\">Typescript</code>의 필요성을 실감하게 되었네요.</p>\n<p>다음으로 컴포넌트를 분리하는데… <code class=\"language-text\">React</code>에서 했던 것처럼 <strong>한 파일 내 여러 컴포넌트가 불가능</strong>해져서 개별 파일로 나눌 수 밖에 없었습니다.</p>\n<p>여기서 고민을 조금 했습니다.</p>\n<p><em>어차피 나눈 3개의 컴포넌트는 서로 의존도가 깊으니, 좀 길더라도 한 컴포넌트에 넣는 게 맞지 않을까?</em></p>\n<p>그래도 나눠서 나쁠 건 없으니 일단은 나누어두었습니다. 그랬더니 <code class=\"language-text\">이벤트버스</code>를 만들어야 하나 고려해볼 정도로 각 컴포넌트간의 통신이 여기저기 왔다갔다하다보니 혼선을 빚었는지, <strong>이전에 하나의 컴포넌트일 때는 괜찮았던 부분들이 터지기 시작</strong>했습니다.</p>\n<p>다행히도 에러 분기 처리를 해줘서 막았지만, 막상 <em>‘괜히 나눈 게 아닐까’</em> 라는 생각만 더 커졌습니다.</p>\n<blockquote>\n<p><code class=\"language-text\">React</code> 였다면 어떻게 분리했을까…?? 라는 생각이 머리를 지배한 순간</p>\n</blockquote>\n<h2 id=\"3-캔버스\" style=\"position:relative;\"><a href=\"#3-%EC%BA%94%EB%B2%84%EC%8A%A4\" aria-label=\"3 캔버스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 캔버스</h2>\n<p>이쪽은 시작하기 전 이름을 고민했습니다.</p>\n<p><em><code class=\"language-text\">Canvas</code>를 쓰니 캔버스라고 해야하나? 아니면 사진을 수정하는 거니 사진탭이라고 해야하나?</em></p>\n<p>결국 처음엔 사진을 쓰다가 마지막에 개발이 완료되고 캔버스로 다시 갈아탔습니다.</p>\n<p>아무래도 평소에 잘 쓰지 않는 <code class=\"language-text\">canvas</code>이다보니 많이 고생했습니다.</p>\n<h2 id=\"3-1-사진을-불러와서-캔버스에-그리기\" style=\"position:relative;\"><a href=\"#3-1-%EC%82%AC%EC%A7%84%EC%9D%84-%EB%B6%88%EB%9F%AC%EC%99%80%EC%84%9C-%EC%BA%94%EB%B2%84%EC%8A%A4%EC%97%90-%EA%B7%B8%EB%A6%AC%EA%B8%B0\" aria-label=\"3 1 사진을 불러와서 캔버스에 그리기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3-1 사진을 불러와서 캔버스에 그리기</h2>\n<p>요구사항은</p>\n<ol>\n<li>사진을 불러와서 캔버스에 보여주고,</li>\n<li>그 위에 글자 메모를 적어 넣은 뒤,</li>\n<li>저장하는 것이었습니다.</li>\n</ol>\n<p>그래서 먼저 사진을 불러와서 캔버스에 보여주는 게 우선이었습니다.</p>\n<p>사진을 <code class=\"language-text\">input</code>태그로 불러와서 <code class=\"language-text\">canvas</code>에 보여주는 건 쉬웠습니다.</p>\n<p><strong>하지만!</strong></p>\n<p><strong><code class=\"language-text\">canvas</code>는 일반 <code class=\"language-text\">img</code>태그처럼 꾸욱 눌러서, 저장하기 컨텍스트 메뉴가 나오게 하는 기능이 없습니다.</strong></p>\n<p>그래서 캔버스 위의 그림을 다시 <code class=\"language-text\">img</code> 태그로 넘겨주어 유저에게 보여주어야 했습니다. 그래야 UX상 유저가 기대하는 기능을 보여줄 수가 있으니까요.</p>\n<p>다행히도 <code class=\"language-text\">canvas</code>에는 <code class=\"language-text\">toDataURL</code> 메서드가 있었고, 이 메서드를 통해 캔버스 위에 그려진 그림을 <code class=\"language-text\">img</code>의 <code class=\"language-text\">src</code> 태그로 넘겨줄 수가 있었습니다.</p>\n<h3 id=\"첫번째-문제\" style=\"position:relative;\"><a href=\"#%EC%B2%AB%EB%B2%88%EC%A7%B8-%EB%AC%B8%EC%A0%9C\" aria-label=\"첫번째 문제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>첫번째 문제</h3>\n<p>이 과정에서 <strong>캔버스의 크기가 원본 사진의 해상도를 바꾸어버리는</strong> 경험을 했습니다. 캔버스의 크기가 작으면, 원본 사진의 크기가 어떻게 되든 스케일을 줄여버리는 것이 원인이었습니다.</p>\n<p><strong>그래서 저는 캔버스를 없애기로 했습니다.</strong></p>\n<p>아예 없애는 것이 아니라, 화면에서 보이지 않게 하기로 한 것입니다.</p>\n<p>사진이 들어오면, 사진의 크기에 맞게 캔버스의 크기를 지정합니다. 그러면 자연스럽게 캔버스가 유저의 화면을 벗어나게 될테고, 반응형 디자인이 깨지게 됩니다. 어차피 화면에 보여줘야 하는 것은 결국 <code class=\"language-text\">img</code> 태그뿐이기 때문에 <strong><code class=\"language-text\">canvas</code> 태그를 숨겼습니다.</strong></p>\n<blockquote>\n<p>이러면 아무리 캔버스가 커도 화면에 보이지 않기 때문에 유저는 알아채지 못합니다.</p>\n</blockquote>\n<h3 id=\"두번째-문제\" style=\"position:relative;\"><a href=\"#%EB%91%90%EB%B2%88%EC%A7%B8-%EB%AC%B8%EC%A0%9C\" aria-label=\"두번째 문제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>두번째 문제</h3>\n<p>그런데 간헐적으로 <strong>오류</strong>가 났습니다. 유저가 불러들인 사진을 <code class=\"language-text\">img</code>의 <code class=\"language-text\">src</code>로 넣는 부분에서 계속 전달 오류가 나서 이미지를 보여주지 못했습니다.\n여러 실험 끝에 알게 된 결과는, <strong>원본 사진의 크기가 커지면 <code class=\"language-text\">dataURL</code>로 파싱하는 과정이 길어져 제때에 <code class=\"language-text\">img</code> 태그의 <code class=\"language-text\">src</code>로 넘겨주지 못하게 되는 것</strong>이었습니다.</p>\n<p>여기서 여러 방법을 고민해보았습니다.</p>\n<ol>\n<li>어차피 가끔 발생하니 내버려둔다 -> 솔직히 혹했지만… 신은 디테일함에 깃든다고, 그냥 넘어갈 수 없는 문제였습니다.</li>\n<li><code class=\"language-text\">setTimeout</code>이나 <code class=\"language-text\">sleep</code>으로 대기 시간을 만든다 -> 각각의 사진마다 걸리는 시간이 다르고, 로딩 시간을 추가하는 것은 UX적으로 치명타라고 생각하여 기각하였습니다.</li>\n<li>될 진 모르겠으나 <code class=\"language-text\">Promise</code>를 사용해본다.</li>\n</ol>\n<p>네. <strong>3번 방법을 이용</strong>하여 데이터가 파싱할 때까지 기다리고, 파싱이 완료되면 <code class=\"language-text\">img</code> 태그로 넘겨주도록 했습니다.</p>\n<p>그랬더니 신기하게도 문제가 해결되었습니다!</p>\n<blockquote>\n<p>Promise에 또다시 감탄하고 갑니다.</p>\n</blockquote>\n<h3 id=\"캔버스-폼\" style=\"position:relative;\"><a href=\"#%EC%BA%94%EB%B2%84%EC%8A%A4-%ED%8F%BC\" aria-label=\"캔버스 폼 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>캔버스 폼</h3>\n<p>사진을 보여주고 저장하는 것까지 끝마쳤으니 이제 메모를 구현할 차례입니다.</p>\n<p>다행히도 버전1에서 했던 방법이 아직 유효하니 그대로 가져왔습니다.\n불행하게도 완벽하지는 못했지요.</p>\n<p>그래서 고친 부분은</p>\n<ol>\n<li>사진의 크기에 따라 <strong>폰트 크기</strong>를 정합니다. 이게 안 되면 해상도가 큰 사진에는 글자가 개미만해집니다.</li>\n<li><strong>글자의 뒷 배경</strong>을 동적으로 만들어줍니다. 다행히 <code class=\"language-text\">canvas</code>에 <code class=\"language-text\">measureText</code>라는 좋은 메서드가 있어 활용하였습니다. 이걸 활용하면 글자가 차지하는 너비를 알 수 있습니다.</li>\n<li>각 파트마다 줄 바꿈도 조금 바꾸었습니다. 동적으로 바꾸었다고 생각하시면 됩니다.</li>\n</ol>\n<blockquote>\n<p>폼 부분도 컴포넌트 분리가 조금 걱정되었으나, 폼은 특수한 경우라고 생각하고 하나의 컴포넌트로 만들었습니다.</p>\n</blockquote>\n<h2 id=\"3-계산기\" style=\"position:relative;\"><a href=\"#3-%EA%B3%84%EC%82%B0%EA%B8%B0\" aria-label=\"3 계산기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 계산기</h2>\n<p>계산기가 가장 어려울 것이라고 생각해서 마지막으로 미뤄두었습니다.\n버전1에서는 그랬거든요.</p>\n<p><strong>하지만…</strong></p>\n<p>처음 시작할 때 공을 들인 공식이 완성도가 높았는지 <strong>정말 쉽게 구현하고 말았습니다.</strong></p>\n<p>이전 버전에서 구현하지 못했던</p>\n<ol>\n<li><code class=\"language-text\">placeholder를</code> 동적으로 설정하기</li>\n<li><code class=\"language-text\">hint</code> 동적으로 설정하기</li>\n<li>각 공식들의 함수 동적 설정</li>\n<li>어쩌구저쩌구 동적으로</li>\n</ol>\n<p>등등… 동적으로 설정하는 건 전부 손쉽게 구현이 가능했습니다.</p>\n<p><code class=\"language-text\">spread operator</code>의 도움도 컸네요.</p>\n<p>다만 여기서도 컴포넌트를 분리하고 나니 <code class=\"language-text\">자식 - 부모 - 자식</code> 같은 <strong>컴포넌트 통신</strong>이 이루어져서 또다시 고민에 빠졌습니다.</p>\n<p>결국 <code class=\"language-text\">ref</code>를 사용하여 해결하긴 했지만 찝찝한 느낌은 가시지 않았습니다. 스택 오버플로우에서는 이렇게 해도 괜찮다고 하긴 했지만…</p>\n<blockquote>\n<p>과연 부모 컴포넌트가 자식 컴포넌트의 함수를 호출하도록 하는 게 맞는 일일까…??</p>\n</blockquote>\n<p>갈수록 컴포넌트 간의 의존도가 높아지는 것 같지만,\n<code class=\"language-text\">Vuex</code>를 쓰지 않는 지금으로썬 최선이니 어쩔 수 없이 이대로 유지하도록 했습니다.</p>\n<h3 id=\"추가-정보-expansion\" style=\"position:relative;\"><a href=\"#%EC%B6%94%EA%B0%80-%EC%A0%95%EB%B3%B4-expansion\" aria-label=\"추가 정보 expansion permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>추가 정보 Expansion</h3>\n<p>위에서 언급한 컴포넌트들의 재사용성과 지속가능성이 맘에 걸렸는지, <strong>이번 컴포넌트는 재사용성과 지속가능성을 최대한 유지</strong>하여 만들게 되었습니다.</p>\n<p>폼처럼 유니크한 것을 요구하는 것도 아니고, 어디에나 붙여쓸 수 있을 것 같은 보편적인 컴포넌트라 가능했던 것 같습니다.</p>\n<blockquote>\n<p>만들어놓고 괜히 혼자 뿌-듯</p>\n</blockquote>\n<h1 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h1>\n<p><img src=\"https://raw.githubusercontent.com/CaesiumY/Togyepi/master/screenshots/lighthouse_result.png\" alt=\"lighthouse_result\"></p>\n<p>끝으로 <code class=\"language-text\">Lighthouse</code>를 통해 성능 테스트를 해보니 꽤나 높게 나와서 만족했습니다.\n접근성에서 점수가 조금 떨어지는 건… 아쉽게도 토계피의 테마 색이 문제라 수정할 수 없었습니다.</p>\n<p>마찬가지로 퍼포먼스는 웹 폰트때문에…</p>\n<p><code class=\"language-text\">Vue</code>로 하는 프로젝트는 한동안 이게 마지막이 될 것 같습니다. 앞으로는 <code class=\"language-text\">react</code>에 집중하려고 합니다. 특히 <code class=\"language-text\">Next</code>와 같은 <code class=\"language-text\">SSR</code> 프레임워크가 떠오르고 있다길래 거기에도요.</p>\n<p><code class=\"language-text\">우리 형 변환기</code>에도 <code class=\"language-text\">Vue</code>가 쓰였는데, 사실상 기능은 <code class=\"language-text\">Vanilla JS</code>로도 충분합니다. 나중에 리뉴얼 할 기회가 있다면 바닐라로 해봐야 싶겠네요.</p>\n<p>별 상관은 없을 수도 있지만, 컴포넌트들의 이름이 전부 <strong>C</strong>로 시작하다보니 (<code class=\"language-text\">Calculator-</code>, <code class=\"language-text\">Canvas-</code>, <code class=\"language-text\">Calendar-</code>) 헷갈릴 때가 있습니다…</p>\n<h1 id=\"다시-보여주기\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%EC%8B%9C-%EB%B3%B4%EC%97%AC%EC%A3%BC%EA%B8%B0\" aria-label=\"다시 보여주기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>다시 보여주기</h1>\n<p><a href=\"https://github.com/CaesiumY/Togyepi\">버전2 깃허브 링크</a></p>\n<p><a href=\"https://caesiumy.github.io/Togyepi/\">버전2 배포 링크</a></p>","frontmatter":{"title":"🔨토계피 리뉴얼 회고","date":"2021/10/06","thumbnail":{"childImageSharp":{"fixed":{"src":"/static/325fc17d35dc1d69c02126ca89413b00/f4094/thumbnail.png"}}}}}},"pageContext":{"slug":"/review/togyepi-retrospect/","previous":{"fields":{"slug":"/review/2021-frontend-dev-matching/"},"frontmatter":{"title":"🔍[2021 Dev-Matching: 웹 프론트엔드 개발자] 회고","category":"review","draft":false}},"next":{"fields":{"slug":"/review/trello-retrospect-2021/"},"frontmatter":{"title":"🛒Trello로 보는 회고(2019.12 ~ 2021.10)","category":"review","draft":false}}}},"staticQueryHashes":["2372332136","876679953"]}