{"componentChunkName":"component---src-templates-blog-post-js","path":"/javascript/understanding-promise-and-async-await/","result":{"data":{"site":{"siteMetadata":{"title":"Caesiumy's BLOG","author":"Caesiumy","siteUrl":"https://caesiumy.github.io","comment":{"disqusShortName":"Caesiumy","utterances":""},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"637fbe11-213e-5c38-8bb1-67eb4b3a6599","excerpt":"썸네일 메이커(링크)\n잘 만들었으니 다들 가서 확인해보세요! 0. 암튼 기다려줘! 최근에 그런 질문을 봤었다. 을 이용해 비동기처럼 환경을 구성해서 데이터를 받아와 처리하는 코드인데 이게 왜 안 돌아가냐고. 코드는 가져올 수 없고, 대충 원하는 결과는 이러했다. 위처럼 나오게 하고 싶은데 결과는 이랬다는 것이다. 비동기를 모르는 개발자나, Promise…","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; margin: 36px auto;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAACK0lEQVQoz3WTW08aQRiGwcPCAiIisioHlQUXdzkvy1lRXCmtFo9tiRovTGtqo6kXJm2TXvSiN73rP346UmtNWi/ezGQy3zPf+86Mw+lwcCfHE3K5A0SjNfR0j0x6A1NrsJ7MY86pfM0l6EQnhvtGnPc10yOjxMYkUi55KFX2EJXdKB4PcUXDSNukV3okk2vkM12KmQ51o0E/X+WdWUbxSkPQQ1O6JJN1e6n6JxnMznISmec4vsArrczzjI2VamAkqxgrHTTdJiPWzMwmVm4Hr0/515Xmlin5JlidCmLPhNgOhzmYX+K1WqKvmuzpVVorTXRtlZS2jq5vYmQP8U+l7q06cd5rCEwJi9eHR/y8veXH5SW3gwHn2/t8v/nMp/MPYv6Gm9MLrt5+5PrqCxfvv9F7ccbJ8YCNTof93T5rzSb1euM3sCZ7OSuVubRtTtttWkYWa9mgU2mx03pGbbnEdm2TA/uAVq1Ho7FHLLZAsVAgrCjiojSS8Rgh4WwIXAsEMWSZZWkcVSgx7sKKLNLNW7y0VtltbrFTXadbadPv7mOWaiJHA1nU/PdlpIXlvMiwMOGnHAySF1nmgmFy4XlySozs7CKFuTiVmMqSEmFcciFJEmNjow8Zjv7J706Gx4spYFmfD9PvpyKAVmBKjNPUZ+YoT8/QjsSoRaJ4XO6/4T+lRXFizuujKGDFSQEMBDBEx6VQiJNKhSPTpF82Keg6S4kEqtBdh48hjz/GL+N1F3PBJPBNAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"article_thumbnail\"\n        title=\"article_thumbnail\"\n        src=\"/static/73822f9cf2e5ecc39dfd40bb7e58e76d/e5715/promise_thumbnail.png\"\n        srcset=\"/static/73822f9cf2e5ecc39dfd40bb7e58e76d/5a46d/promise_thumbnail.png 300w,\n/static/73822f9cf2e5ecc39dfd40bb7e58e76d/0a47e/promise_thumbnail.png 600w,\n/static/73822f9cf2e5ecc39dfd40bb7e58e76d/e5715/promise_thumbnail.png 768w\"\n        sizes=\"(max-width: 768px) 100vw, 768px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<blockquote>\n<p><a href=\"https://velog.io/@oneook/%EC%8D%B8%EB%84%A4%EC%9D%BC-%EB%A9%94%EC%9D%B4%EC%BB%A4Thumbnail-Maker-Toy-Project\">썸네일 메이커(링크)</a>\n잘 만들었으니 다들 가서 확인해보세요!</p>\n</blockquote>\n<h1 id=\"0-암튼-기다려줘\" style=\"position:relative;\"><a href=\"#0-%EC%95%94%ED%8A%BC-%EA%B8%B0%EB%8B%A4%EB%A0%A4%EC%A4%98\" aria-label=\"0 암튼 기다려줘 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>0. 암튼 기다려줘!</h1>\n<p>최근에 그런 질문을 봤었다.</p>\n<p><code class=\"language-text\">setTimeout</code>을 이용해 비동기처럼 환경을 구성해서 데이터를 받아와 처리하는 코드인데 이게 왜 안 돌아가냐고.</p>\n<p>코드는 가져올 수 없고, 대충 원하는 결과는 이러했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">1\n2\n3\nDone!</code></pre></div>\n<p>위처럼 나오게 하고 싶은데</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Done!\n1\n2\n3</code></pre></div>\n<p>결과는 이랬다는 것이다.</p>\n<p>비동기를 모르는 개발자나, Promise에 대해 깊이 생각해보지 않은 개발자였다면 <em>어라 이거 왜 이러지??</em> 라고 생각했을 것이다.</p>\n<p>그러나 나는 코드를 보자마자 문제점을 떠올렸다.</p>\n<blockquote>\n<p>이거 <code class=\"language-text\">Promise</code> 가 없네</p>\n</blockquote>\n<p>그랬다. <code class=\"language-text\">Promise</code> 없이 그저 <code class=\"language-text\">setTimeout</code>과 <code class=\"language-text\">async/await</code>를 혼합해 놓고선 <code class=\"language-text\">setTimeout</code>을 <code class=\"language-text\">await</code>를 통해 기다리라고 했던 것이다.</p>\n<p>자바스크립트 최신 문법만을 배우는 뉴비들에게서 자주 나타나는 문제이다. <code class=\"language-text\">async/await</code>를 맹신한 나머지 <code class=\"language-text\">Promise</code>를 구시대의 유물로 취급하여 쓰지 않으려는 문제.</p>\n<p>물론 최신 문법이 편한 건 맞지만, <code class=\"language-text\">async/await</code>는 길어지는 콜백 지옥, 메서드 체이닝을 피하기 위한 방법이지, <code class=\"language-text\">Promise</code>를 저 밑바닥으로 보내버리는 방법이 절대 아니다!</p>\n<blockquote>\n<p>이제부터 <code class=\"language-text\">Promise</code>와 <code class=\"language-text\">async/await</code> 를 사용해 비동기 최적화를 해보자!</p>\n</blockquote>\n<h1 id=\"1-promise는-아직-필요하고-await는-만능이-아니다\" style=\"position:relative;\"><a href=\"#1-promise%EB%8A%94-%EC%95%84%EC%A7%81-%ED%95%84%EC%9A%94%ED%95%98%EA%B3%A0-await%EB%8A%94-%EB%A7%8C%EB%8A%A5%EC%9D%B4-%EC%95%84%EB%8B%88%EB%8B%A4\" aria-label=\"1 promise는 아직 필요하고 await는 만능이 아니다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Promise는 아직 필요하고, await는 만능이 아니다.</h1>\n<p><code class=\"language-text\">Promise</code>에는 여러 메서드들이 있다. 여러 비동기 중 가장 빨리 가져오는 것만 반환한다든지, 여러 개의 비동기를 병렬로 한 번에 가져온다든지 하는 등등…</p>\n<p>그리고 우리는 후자를 살펴볼 것이다.</p>\n<h2 id=\"promise\" style=\"position:relative;\"><a href=\"#promise\" aria-label=\"promise permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Promise</h2>\n<p><a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Promise\">MDN Promise 문서</a></p>\n<p>사실 문서를 읽는 게 정말 정말 좋은 선택이지만, <strong>TL;DR</strong>를 위해 간단히 요약하자면,</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">//성공하면</span>\n  <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'반환 값'</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">//실패하면</span>\n  <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span><span class=\"token string\">'반환 값'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>이렇게 Promise 구조를 익혀두면 된다.\n주로 <code class=\"language-text\">setTimeout</code>을 안에서 사용해 시간이 지나면 <code class=\"language-text\">resolve</code>하게 하는 식으로 테스트를 하곤 한다.</p>\n<h2 id=\"async--await\" style=\"position:relative;\"><a href=\"#async--await\" aria-label=\"async  await permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>async / await</h2>\n<p>역시나 <strong>TL;DR</strong>를 위해서 간단히 하고 싶은 말만 하자면,</p>\n<p><strong><code class=\"language-text\">await</code>는 뭐든 연산이 끝날 때까지 기다려주는 만능 코드가 아니다!</strong></p>\n<p><code class=\"language-text\">await</code>는 Promise의 <code class=\"language-text\">pending</code> 상태가 끝날 때까지 기다려주는 것이지, <code class=\"language-text\">setTimeout</code>의 일정 시간 이후에 <code class=\"language-text\">실행 컨텍스트</code>에 추가되고 실행되는 것을 기다려주는 것이 아니다.</p>\n<blockquote>\n<p>이 부분은 따로 <code class=\"language-text\">실행 컨텍스트</code>를 공부하면 이해하게 될 것이다.</p>\n</blockquote>\n<h1 id=\"2-병렬로-비동기-데이터를-한-번에-받아온다고\" style=\"position:relative;\"><a href=\"#2-%EB%B3%91%EB%A0%AC%EB%A1%9C-%EB%B9%84%EB%8F%99%EA%B8%B0-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%A5%BC-%ED%95%9C-%EB%B2%88%EC%97%90-%EB%B0%9B%EC%95%84%EC%98%A8%EB%8B%A4%EA%B3%A0\" aria-label=\"2 병렬로 비동기 데이터를 한 번에 받아온다고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 병렬로 비동기 데이터를 한 번에 받아온다고?</h1>\n<p>원래 이해하기 위해서는 단계가 필요하다.</p>\n<ol start=\"0\">\n<li><code class=\"language-text\">setTimeout</code>으로 비동기처럼 꾸미기</li>\n<li>배열을 비동기로 가져오기</li>\n<li>배열의 아이템을 각각 순서대로 비동기로 가져와보기</li>\n<li>어라 안 되네?</li>\n<li><code class=\"language-text\">await</code>를 사용해서 다시 각각 순서대로 비동기로 가져와보기</li>\n<li>어라 배열 메서드들이 안 먹히네?</li>\n<li>기본 <code class=\"language-text\">for</code> 문을 사용하면 되는구나!</li>\n<li>순차적으로 불러오는 건 가능한데, 이러면 시간이 오래 걸려</li>\n<li>다른 방법이 없을까?</li>\n</ol>\n<p>이러한 중간 과정 다 생략하고, 우리가 원하는 결과를 빠르게 보자.</p>\n<h2 id=\"배열의-아이템을-code-classlanguage-textpromiseallcode을-사용해-병렬로-한-번에-가져오기\" style=\"position:relative;\"><a href=\"#%EB%B0%B0%EC%97%B4%EC%9D%98-%EC%95%84%EC%9D%B4%ED%85%9C%EC%9D%84-code-classlanguage-textpromiseallcode%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%B4-%EB%B3%91%EB%A0%AC%EB%A1%9C-%ED%95%9C-%EB%B2%88%EC%97%90-%EA%B0%80%EC%A0%B8%EC%98%A4%EA%B8%B0\" aria-label=\"배열의 아이템을 code classlanguage textpromiseallcode을 사용해 병렬로 한 번에 가져오기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>배열의 아이템을 <code class=\"language-text\">Promise.all()</code>을 사용해 병렬로 한 번에 가져오기</h2>\n<p>백문이 불여일견이라고, 코드를 보면 이해가 쉽다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getPromiseCrewList</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 크루 리스트를 비동기로 반환하는 함수</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Promise를 반환해줘야 await 사용가능</span>\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> crewList <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Spike'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Ain'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Jet'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Faye'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Edward'</span><span class=\"token punctuation\">]</span>\n      <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>crewList<span class=\"token punctuation\">)</span> <span class=\"token comment\">// crewList를 반환해준다.</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">processParallelPromise</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">name</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 각각의 이름들에 대해 비동기로 동작하는 함수</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      name<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token number\">3</span> <span class=\"token operator\">?</span> <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">startParallelPromise</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 비동기로 가져온 배열의 아이템을 각각 비동기 함수에 넘겨주는 함수</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">time</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Parallel'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> crew <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">getPromiseCrewList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token comment\">// [\"Spike\", \"Ain\", \"Jet\", \"Faye\", \"Edward\"], 3초 뒤에 배열을 반환한다.</span>\n  <span class=\"token keyword\">const</span> mappingPromiseArray <span class=\"token operator\">=</span> crew<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">c</span> <span class=\"token operator\">=></span> <span class=\"token function\">processParallelPromise</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token comment\">// [Promise, Promise, Promise, Promise, Promise], 이처럼 Promise의 배열로 만들어준다.</span>\n  <span class=\"token keyword\">const</span> makeParallelPromiseArray <span class=\"token operator\">=</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span>mappingPromiseArray<span class=\"token punctuation\">)</span>\n  <span class=\"token comment\">// Promise {&lt;pending>}, Promise의 배열이기에 Promise.all에게 넘겨주는 게 가능해진다.</span>\n  <span class=\"token keyword\">const</span> isOverThree <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> makeParallelPromiseArray\n  <span class=\"token comment\">// Promise.all() 덕분에 병렬로 불러오게 된다.</span>\n\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>isOverThree<span class=\"token punctuation\">)</span> <span class=\"token comment\">// [true, false, false, true, true]</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">timeEnd</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Parallel'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// about 3002ms</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">startParallelPromise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>만약 병렬로 안 불러왔다면, 초기 2000ms + 각각 1000ms * 5가 되어 <strong>7초</strong>가 걸렸을 것이다.\n하지만 병렬로 불러온 덕분에 초기 2000ms + 1000ms가 되어 <strong>겨우 3초</strong>만에 모든 데이터를 가져오는 게 가능!</p>\n<h2 id=\"코드-샌드박스로-직접-보기\" style=\"position:relative;\"><a href=\"#%EC%BD%94%EB%93%9C-%EC%83%8C%EB%93%9C%EB%B0%95%EC%8A%A4%EB%A1%9C-%EC%A7%81%EC%A0%91-%EB%B3%B4%EA%B8%B0\" aria-label=\"코드 샌드박스로 직접 보기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>코드 샌드박스로 직접 보기</h2>\n<iframe src=\"https://codesandbox.io/embed/ecstatic-agnesi-d575o?expanddevtools=1&fontsize=14&hidenavigation=1&theme=dark\"\n     style=\"width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;\"\n     title=\"ecstatic-agnesi-d575o\"\n     allow=\"accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking\"\n     sandbox=\"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts\"\n></iframe>\n<p>콘솔창을 보면 <strong>3초만</strong>에 모든 값을 가져온 것을 알 수 있다.</p>\n<h1 id=\"3-같이-보기\" style=\"position:relative;\"><a href=\"#3-%EA%B0%99%EC%9D%B4-%EB%B3%B4%EA%B8%B0\" aria-label=\"3 같이 보기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 같이 보기</h1>\n<p>위 코드를 보면서 이해하면 다행이지만, 그게 아니라면 아래의 참고 문서 읽어보길 권한다.</p>\n<ul>\n<li><a href=\"https://mygumi.tistory.com/328\">[Async function] async/await 비동기 처리</a></li>\n<li><a href=\"https://developers.google.com/web/fundamentals/primers/async-functions\">비동기 함수 - 프라미스에 친숙해질 수 있게 해주는 함수</a></li>\n</ul>\n<blockquote>\n<p>비동기는 어느 자바스크립트 개발자에게나 어려운 과제이다. 낙담하지 말고 이론을 잘 살펴보면 길이 보일 것이다!</p>\n</blockquote>","frontmatter":{"title":"[JS] 🚀병렬로 비동기 데이터 한 번에 받아오기","date":"2021/08/23","thumbnail":{"childImageSharp":{"fixed":{"src":"/static/73822f9cf2e5ecc39dfd40bb7e58e76d/f4094/promise_thumbnail.png"}}}}}},"pageContext":{"slug":"/javascript/understanding-promise-and-async-await/","previous":{"fields":{"slug":"/review/clean-code-review/"},"frontmatter":{"title":"📘[개발 서적] 클린 코드를 읽고","category":"review","draft":false}},"next":null}},"staticQueryHashes":["2372332136","876679953"]}