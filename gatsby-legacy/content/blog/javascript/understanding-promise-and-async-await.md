---
title: '[JS] ğŸš€ë³‘ë ¬ë¡œ ë¹„ë™ê¸° ë°ì´í„° í•œ ë²ˆì— ë°›ì•„ì˜¤ê¸°'
date: 2021-08-23 23:08:75
category: javascript
thumbnail: './images/21-08-23/promise_thumbnail.png'
draft: false
---

![article_thumbnail](./images/21-08-23/promise_thumbnail.png)

> [ì¸ë„¤ì¼ ë©”ì´ì»¤(ë§í¬)](https://velog.io/@oneook/%EC%8D%B8%EB%84%A4%EC%9D%BC-%EB%A9%94%EC%9D%B4%EC%BB%A4Thumbnail-Maker-Toy-Project)
> ì˜ ë§Œë“¤ì—ˆìœ¼ë‹ˆ ë‹¤ë“¤ ê°€ì„œ í™•ì¸í•´ë³´ì„¸ìš”!

# 0. ì•”íŠ¼ ê¸°ë‹¤ë ¤ì¤˜!

ìµœê·¼ì— ê·¸ëŸ° ì§ˆë¬¸ì„ ë´¤ì—ˆë‹¤.

`setTimeout`ì„ ì´ìš©í•´ ë¹„ë™ê¸°ì²˜ëŸ¼ í™˜ê²½ì„ êµ¬ì„±í•´ì„œ ë°ì´í„°ë¥¼ ë°›ì•„ì™€ ì²˜ë¦¬í•˜ëŠ” ì½”ë“œì¸ë° ì´ê²Œ ì™œ ì•ˆ ëŒì•„ê°€ëƒê³ .

ì½”ë“œëŠ” ê°€ì ¸ì˜¬ ìˆ˜ ì—†ê³ , ëŒ€ì¶© ì›í•˜ëŠ” ê²°ê³¼ëŠ” ì´ëŸ¬í–ˆë‹¤.

```
1
2
3
Done!
```

ìœ„ì²˜ëŸ¼ ë‚˜ì˜¤ê²Œ í•˜ê³  ì‹¶ì€ë°

```
Done!
1
2
3
```

ê²°ê³¼ëŠ” ì´ë¬ë‹¤ëŠ” ê²ƒì´ë‹¤.

ë¹„ë™ê¸°ë¥¼ ëª¨ë¥´ëŠ” ê°œë°œìë‚˜, Promiseì— ëŒ€í•´ ê¹Šì´ ìƒê°í•´ë³´ì§€ ì•Šì€ ê°œë°œìì˜€ë‹¤ë©´ _ì–´ë¼ ì´ê±° ì™œ ì´ëŸ¬ì§€??_ ë¼ê³  ìƒê°í–ˆì„ ê²ƒì´ë‹¤.

ê·¸ëŸ¬ë‚˜ ë‚˜ëŠ” ì½”ë“œë¥¼ ë³´ìë§ˆì ë¬¸ì œì ì„ ë– ì˜¬ë ¸ë‹¤.

> ì´ê±° `Promise` ê°€ ì—†ë„¤

ê·¸ë¬ë‹¤. `Promise` ì—†ì´ ê·¸ì € `setTimeout`ê³¼ `async/await`ë¥¼ í˜¼í•©í•´ ë†“ê³ ì„  `setTimeout`ì„ `await`ë¥¼ í†µí•´ ê¸°ë‹¤ë¦¬ë¼ê³  í–ˆë˜ ê²ƒì´ë‹¤.

ìë°”ìŠ¤í¬ë¦½íŠ¸ ìµœì‹  ë¬¸ë²•ë§Œì„ ë°°ìš°ëŠ” ë‰´ë¹„ë“¤ì—ê²Œì„œ ìì£¼ ë‚˜íƒ€ë‚˜ëŠ” ë¬¸ì œì´ë‹¤. `async/await`ë¥¼ ë§¹ì‹ í•œ ë‚˜ë¨¸ì§€ `Promise`ë¥¼ êµ¬ì‹œëŒ€ì˜ ìœ ë¬¼ë¡œ ì·¨ê¸‰í•˜ì—¬ ì“°ì§€ ì•Šìœ¼ë ¤ëŠ” ë¬¸ì œ.

ë¬¼ë¡  ìµœì‹  ë¬¸ë²•ì´ í¸í•œ ê±´ ë§ì§€ë§Œ, `async/await`ëŠ” ê¸¸ì–´ì§€ëŠ” ì½œë°± ì§€ì˜¥, ë©”ì„œë“œ ì²´ì´ë‹ì„ í”¼í•˜ê¸° ìœ„í•œ ë°©ë²•ì´ì§€, `Promise`ë¥¼ ì € ë°‘ë°”ë‹¥ìœ¼ë¡œ ë³´ë‚´ë²„ë¦¬ëŠ” ë°©ë²•ì´ ì ˆëŒ€ ì•„ë‹ˆë‹¤!

> ì´ì œë¶€í„° `Promise`ì™€ `async/await` ë¥¼ ì‚¬ìš©í•´ ë¹„ë™ê¸° ìµœì í™”ë¥¼ í•´ë³´ì!

# 1. PromiseëŠ” ì•„ì§ í•„ìš”í•˜ê³ , awaitëŠ” ë§ŒëŠ¥ì´ ì•„ë‹ˆë‹¤.

`Promise`ì—ëŠ” ì—¬ëŸ¬ ë©”ì„œë“œë“¤ì´ ìˆë‹¤. ì—¬ëŸ¬ ë¹„ë™ê¸° ì¤‘ ê°€ì¥ ë¹¨ë¦¬ ê°€ì ¸ì˜¤ëŠ” ê²ƒë§Œ ë°˜í™˜í•œë‹¤ë“ ì§€, ì—¬ëŸ¬ ê°œì˜ ë¹„ë™ê¸°ë¥¼ ë³‘ë ¬ë¡œ í•œ ë²ˆì— ê°€ì ¸ì˜¨ë‹¤ë“ ì§€ í•˜ëŠ” ë“±ë“±...

ê·¸ë¦¬ê³  ìš°ë¦¬ëŠ” í›„ìë¥¼ ì‚´í´ë³¼ ê²ƒì´ë‹¤.

## Promise

[MDN Promise ë¬¸ì„œ](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Promise)

ì‚¬ì‹¤ ë¬¸ì„œë¥¼ ì½ëŠ” ê²Œ ì •ë§ ì •ë§ ì¢‹ì€ ì„ íƒì´ì§€ë§Œ, **TL;DR**ë¥¼ ìœ„í•´ ê°„ë‹¨íˆ ìš”ì•½í•˜ìë©´,

```js
return new Promise((resolve, reject) => {
  //ì„±ê³µí•˜ë©´
  resolve('ë°˜í™˜ ê°’')

  //ì‹¤íŒ¨í•˜ë©´
  reject('ë°˜í™˜ ê°’')
})
```

ì´ë ‡ê²Œ Promise êµ¬ì¡°ë¥¼ ìµí˜€ë‘ë©´ ëœë‹¤.
ì£¼ë¡œ `setTimeout`ì„ ì•ˆì—ì„œ ì‚¬ìš©í•´ ì‹œê°„ì´ ì§€ë‚˜ë©´ `resolve`í•˜ê²Œ í•˜ëŠ” ì‹ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ í•˜ê³¤ í•œë‹¤.

## async / await

ì—­ì‹œë‚˜ **TL;DR**ë¥¼ ìœ„í•´ì„œ ê°„ë‹¨íˆ í•˜ê³  ì‹¶ì€ ë§ë§Œ í•˜ìë©´,

**`await`ëŠ” ë­ë“  ì—°ì‚°ì´ ëë‚  ë•Œê¹Œì§€ ê¸°ë‹¤ë ¤ì£¼ëŠ” ë§ŒëŠ¥ ì½”ë“œê°€ ì•„ë‹ˆë‹¤!**

`await`ëŠ” Promiseì˜ `pending` ìƒíƒœê°€ ëë‚  ë•Œê¹Œì§€ ê¸°ë‹¤ë ¤ì£¼ëŠ” ê²ƒì´ì§€, `setTimeout`ì˜ ì¼ì • ì‹œê°„ ì´í›„ì— `ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸`ì— ì¶”ê°€ë˜ê³  ì‹¤í–‰ë˜ëŠ” ê²ƒì„ ê¸°ë‹¤ë ¤ì£¼ëŠ” ê²ƒì´ ì•„ë‹ˆë‹¤.

> ì´ ë¶€ë¶„ì€ ë”°ë¡œ `ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸`ë¥¼ ê³µë¶€í•˜ë©´ ì´í•´í•˜ê²Œ ë  ê²ƒì´ë‹¤.

# 2. ë³‘ë ¬ë¡œ ë¹„ë™ê¸° ë°ì´í„°ë¥¼ í•œ ë²ˆì— ë°›ì•„ì˜¨ë‹¤ê³ ?

ì›ë˜ ì´í•´í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¨ê³„ê°€ í•„ìš”í•˜ë‹¤.

0. `setTimeout`ìœ¼ë¡œ ë¹„ë™ê¸°ì²˜ëŸ¼ ê¾¸ë¯¸ê¸°
1. ë°°ì—´ì„ ë¹„ë™ê¸°ë¡œ ê°€ì ¸ì˜¤ê¸°
1. ë°°ì—´ì˜ ì•„ì´í…œì„ ê°ê° ìˆœì„œëŒ€ë¡œ ë¹„ë™ê¸°ë¡œ ê°€ì ¸ì™€ë³´ê¸°
1. ì–´ë¼ ì•ˆ ë˜ë„¤?
1. `await`ë¥¼ ì‚¬ìš©í•´ì„œ ë‹¤ì‹œ ê°ê° ìˆœì„œëŒ€ë¡œ ë¹„ë™ê¸°ë¡œ ê°€ì ¸ì™€ë³´ê¸°
1. ì–´ë¼ ë°°ì—´ ë©”ì„œë“œë“¤ì´ ì•ˆ ë¨¹íˆë„¤?
1. ê¸°ë³¸ `for` ë¬¸ì„ ì‚¬ìš©í•˜ë©´ ë˜ëŠ”êµ¬ë‚˜!
1. ìˆœì°¨ì ìœ¼ë¡œ ë¶ˆëŸ¬ì˜¤ëŠ” ê±´ ê°€ëŠ¥í•œë°, ì´ëŸ¬ë©´ ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë ¤
1. ë‹¤ë¥¸ ë°©ë²•ì´ ì—†ì„ê¹Œ?

ì´ëŸ¬í•œ ì¤‘ê°„ ê³¼ì • ë‹¤ ìƒëµí•˜ê³ , ìš°ë¦¬ê°€ ì›í•˜ëŠ” ê²°ê³¼ë¥¼ ë¹ ë¥´ê²Œ ë³´ì.

## ë°°ì—´ì˜ ì•„ì´í…œì„ `Promise.all()`ì„ ì‚¬ìš©í•´ ë³‘ë ¬ë¡œ í•œ ë²ˆì— ê°€ì ¸ì˜¤ê¸°

ë°±ë¬¸ì´ ë¶ˆì—¬ì¼ê²¬ì´ë¼ê³ , ì½”ë“œë¥¼ ë³´ë©´ ì´í•´ê°€ ì‰½ë‹¤.

```js
const getPromiseCrewList = () => {
  // í¬ë£¨ ë¦¬ìŠ¤íŠ¸ë¥¼ ë¹„ë™ê¸°ë¡œ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜
  return new Promise(resolve => {
    // Promiseë¥¼ ë°˜í™˜í•´ì¤˜ì•¼ await ì‚¬ìš©ê°€ëŠ¥
    setTimeout(() => {
      const crewList = ['Spike', 'Ain', 'Jet', 'Faye', 'Edward']
      resolve(crewList) // crewListë¥¼ ë°˜í™˜í•´ì¤€ë‹¤.
    }, 2000)
  })
}

const processParallelPromise = name => {
  // ê°ê°ì˜ ì´ë¦„ë“¤ì— ëŒ€í•´ ë¹„ë™ê¸°ë¡œ ë™ì‘í•˜ëŠ” í•¨ìˆ˜
  return new Promise(resolve => {
    setTimeout(() => {
      name.length > 3 ? resolve(true) : resolve(false)
    }, 1000)
  })
}

const startParallelPromise = async () => {
  // ë¹„ë™ê¸°ë¡œ ê°€ì ¸ì˜¨ ë°°ì—´ì˜ ì•„ì´í…œì„ ê°ê° ë¹„ë™ê¸° í•¨ìˆ˜ì— ë„˜ê²¨ì£¼ëŠ” í•¨ìˆ˜
  console.time('Parallel')
  const crew = await getPromiseCrewList()
  // ["Spike", "Ain", "Jet", "Faye", "Edward"], 3ì´ˆ ë’¤ì— ë°°ì—´ì„ ë°˜í™˜í•œë‹¤.
  const mappingPromiseArray = crew.map(c => processParallelPromise(c))
  // [Promise, Promise, Promise, Promise, Promise], ì´ì²˜ëŸ¼ Promiseì˜ ë°°ì—´ë¡œ ë§Œë“¤ì–´ì¤€ë‹¤.
  const makeParallelPromiseArray = Promise.all(mappingPromiseArray)
  // Promise {<pending>}, Promiseì˜ ë°°ì—´ì´ê¸°ì— Promise.allì—ê²Œ ë„˜ê²¨ì£¼ëŠ” ê²Œ ê°€ëŠ¥í•´ì§„ë‹¤.
  const isOverThree = await makeParallelPromiseArray
  // Promise.all() ë•ë¶„ì— ë³‘ë ¬ë¡œ ë¶ˆëŸ¬ì˜¤ê²Œ ëœë‹¤.

  console.log(isOverThree) // [true, false, false, true, true]
  console.timeEnd('Parallel') // about 3002ms
}

startParallelPromise()
```

ë§Œì•½ ë³‘ë ¬ë¡œ ì•ˆ ë¶ˆëŸ¬ì™”ë‹¤ë©´, ì´ˆê¸° 2000ms + ê°ê° 1000ms \* 5ê°€ ë˜ì–´ **7ì´ˆ**ê°€ ê±¸ë ¸ì„ ê²ƒì´ë‹¤.
í•˜ì§€ë§Œ ë³‘ë ¬ë¡œ ë¶ˆëŸ¬ì˜¨ ë•ë¶„ì— ì´ˆê¸° 2000ms + 1000msê°€ ë˜ì–´ **ê²¨ìš° 3ì´ˆ**ë§Œì— ëª¨ë“  ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê²Œ ê°€ëŠ¥!

## ì½”ë“œ ìƒŒë“œë°•ìŠ¤ë¡œ ì§ì ‘ ë³´ê¸°

<iframe src="https://codesandbox.io/embed/ecstatic-agnesi-d575o?expanddevtools=1&fontsize=14&hidenavigation=1&theme=dark"
     style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;"
     title="ecstatic-agnesi-d575o"
     allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"
     sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"
></iframe>

ì½˜ì†”ì°½ì„ ë³´ë©´ **3ì´ˆë§Œ**ì— ëª¨ë“  ê°’ì„ ê°€ì ¸ì˜¨ ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.

# 3. ê°™ì´ ë³´ê¸°

ìœ„ ì½”ë“œë¥¼ ë³´ë©´ì„œ ì´í•´í•˜ë©´ ë‹¤í–‰ì´ì§€ë§Œ, ê·¸ê²Œ ì•„ë‹ˆë¼ë©´ ì•„ë˜ì˜ ì°¸ê³  ë¬¸ì„œ ì½ì–´ë³´ê¸¸ ê¶Œí•œë‹¤.

- [[Async function] async/await ë¹„ë™ê¸° ì²˜ë¦¬](https://mygumi.tistory.com/328)
- [ë¹„ë™ê¸° í•¨ìˆ˜ - í”„ë¼ë¯¸ìŠ¤ì— ì¹œìˆ™í•´ì§ˆ ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” í•¨ìˆ˜](https://developers.google.com/web/fundamentals/primers/async-functions)

> ë¹„ë™ê¸°ëŠ” ì–´ëŠ ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°œë°œìì—ê²Œë‚˜ ì–´ë ¤ìš´ ê³¼ì œì´ë‹¤. ë‚™ë‹´í•˜ì§€ ë§ê³  ì´ë¡ ì„ ì˜ ì‚´í´ë³´ë©´ ê¸¸ì´ ë³´ì¼ ê²ƒì´ë‹¤!
